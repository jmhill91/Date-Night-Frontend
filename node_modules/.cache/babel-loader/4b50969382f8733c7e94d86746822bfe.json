{"ast":null,"code":"var _jsxFileName = \"/Users/flatironschool/john/project/Date-Night-Frontend/src/components/ProfilePage.js\";\nimport React from 'react';\nimport NavSidebar from '../containers/NavSideBar';\nimport PastDates from '../containers/PastDatesContainer';\nimport UpcomingDates from '../containers/UpcomingDatesContainer';\n\nclass ProfilePage extends React.Component {\n  constructor(...args) {\n    super(...args);\n    this.state = {\n      name: '',\n      userId: null,\n      currentDates: [],\n      pastDates: [],\n      phone: '',\n      email: '',\n      significant_other_phone: ''\n    };\n\n    this.cancelDate = (e, dateID) => {\n      fetch(\"http://localhost:3000/rendezvou/\".concat(dateID), {\n        method: 'DELETE',\n        headers: {\n          'Content-Type': 'application/json',\n          'Accept': 'application/json'\n        }\n      }).then(window.location.reload());\n    };\n  }\n\n  componentDidMount() {\n    if (localStorage.token) {\n      fetch('http://localhost:3000/profile', {\n        headers: {\n          Authorization: localStorage.token\n        }\n      }).then(res => res.json()).then(profileInfo => {\n        profileInfo.data.attributes.rendezvous.forEach(dateNight => {\n          var tempDate = new Date();\n          var currentTime = new Date(tempDate.getUTCFullYear(), tempDate.getUTCMonth(), tempDate.getUTCDate() - 1);\n\n          if (dateNight.date > currentTime.toISOString()) {\n            this.setState({\n              currentDates: [...this.state.currentDates, dateNight]\n            });\n          } else {\n            this.setState({\n              pastDates: [...this.state.pastDates, dateNight]\n            });\n          }\n        });\n        this.setState({\n          name: profileInfo.data.attributes.name,\n          userId: profileInfo.data.id,\n          phone: profileInfo.data.attributes.phone_number,\n          email: profileInfo.data.attributes.email,\n          significant_other_phone: profileInfo.data.attributes.significant_other_phone\n        });\n      });\n    } else {\n      this.props.history.push('/');\n    }\n  }\n\n  render() {\n    console.log(this.state);\n    return React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 62\n      },\n      __self: this\n    }, React.createElement(\"h1\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 63\n      },\n      __self: this\n    }, \"Welcome \", this.state.name), React.createElement(NavSidebar, {\n      cancelDate: this.cancelDate,\n      history: this.props.history,\n      user_id: this.state.userId,\n      dates: this.state.currentDates,\n      dateTypes: this.props.dateTypes,\n      usersName: this.state.name,\n      phone: this.state.phone,\n      email: this.state.email,\n      soPhone: this.state.significant_other_phone,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 64\n      },\n      __self: this\n    }), React.createElement(\"h2\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 75\n      },\n      __self: this\n    }, \"Upcoming Dates\"), React.createElement(UpcomingDates, {\n      dates: this.state.currentDates,\n      clothing: this.props.clothing,\n      dateTypes: this.props.dateTypes,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 76\n      },\n      __self: this\n    }), React.createElement(\"h2\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 77\n      },\n      __self: this\n    }, \"Past Dates\"), React.createElement(PastDates, {\n      dates: this.state.pastDates,\n      clothing: this.props.clothing,\n      dateTypes: this.props.dateTypes,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 78\n      },\n      __self: this\n    }));\n  }\n\n}\n\nexport default ProfilePage;","map":{"version":3,"sources":["/Users/flatironschool/john/project/Date-Night-Frontend/src/components/ProfilePage.js"],"names":["React","NavSidebar","PastDates","UpcomingDates","ProfilePage","Component","state","name","userId","currentDates","pastDates","phone","email","significant_other_phone","cancelDate","e","dateID","fetch","method","headers","then","window","location","reload","componentDidMount","localStorage","token","Authorization","res","json","profileInfo","data","attributes","rendezvous","forEach","dateNight","tempDate","Date","currentTime","getUTCFullYear","getUTCMonth","getUTCDate","date","toISOString","setState","id","phone_number","props","history","push","render","console","log","dateTypes","clothing"],"mappings":"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","sourcesContent":["import React from 'react'\nimport NavSidebar from '../containers/NavSideBar'\nimport PastDates from '../containers/PastDatesContainer'\nimport UpcomingDates from '../containers/UpcomingDatesContainer'\n\nclass ProfilePage extends React.Component {\nstate = {\n  name: '',\n  userId: null,\n  currentDates: [],\n  pastDates: [],\n  phone: '',\n  email: '',\n  significant_other_phone: ''\n}\n  componentDidMount() {\n    if (localStorage.token) {\n      fetch('http://localhost:3000/profile', {\n        headers: {\n          Authorization: localStorage.token\n        }\n      })\n        .then(res => res.json())\n        .then(profileInfo =>{\n          profileInfo.data.attributes.rendezvous.forEach((dateNight) => {\n            var tempDate = new Date();\n            var currentTime = new Date (tempDate.getUTCFullYear(), tempDate.getUTCMonth(), tempDate.getUTCDate()-1);\n            if (dateNight.date > currentTime.toISOString()){\n              this.setState({  currentDates: [...this.state.currentDates, dateNight]})\n            }\n            else {\n              this.setState({  pastDates: [...this.state.pastDates, dateNight]})\n            }\n          })\n          this.setState({\n            name: profileInfo.data.attributes.name,\n            userId: profileInfo.data.id,\n            phone: profileInfo.data.attributes.phone_number,\n            email: profileInfo.data.attributes.email,\n            significant_other_phone: profileInfo.data.attributes.significant_other_phone\n          })\n        })\n  }   else {\n    this.props.history.push('/')\n  }\n}\n\n  cancelDate = (e, dateID) => {\n    fetch(`http://localhost:3000/rendezvou/${dateID}`,{\n      method: 'DELETE',\n      headers: {\n        'Content-Type': 'application/json',\n        'Accept': 'application/json'\n      },\n    })\n    .then(window.location.reload())\n  }\n\n  render(){\n    console.log(this.state);\n    return(\n      <div>\n        <h1>Welcome {this.state.name}</h1>\n        <NavSidebar\n        cancelDate={this.cancelDate}\n        history={this.props.history}\n        user_id={this.state.userId}\n        dates={this.state.currentDates}\n        dateTypes={this.props.dateTypes}\n        usersName = {this.state.name}\n        phone = {this.state.phone}\n        email = {this.state.email}\n        soPhone = {this.state.significant_other_phone}\n        />\n          <h2>Upcoming Dates</h2>\n          <UpcomingDates dates={this.state.currentDates} clothing={this.props.clothing} dateTypes={this.props.dateTypes}/>\n          <h2>Past Dates</h2>\n          <PastDates dates={this.state.pastDates} clothing={this.props.clothing} dateTypes={this.props.dateTypes}/>\n      </div>\n    )\n  }\n}\n\nexport default ProfilePage\n"]},"metadata":{},"sourceType":"module"}